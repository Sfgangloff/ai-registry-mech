{
  "_format": "hh-sol-artifact-1",
  "contractName": "BalanceTrackerNvmSubscription",
  "sourceName": "contracts/mechs/nevermined/BalanceTrackerNvmSubscription.sol",
  "abi": [
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "_mechMarketplace",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "_subscriptionNFT",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "_subscriptionTokenId",
          "type": "uint256"
        }
      ],
      "stateMutability": "nonpayable",
      "type": "constructor"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "current",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "required",
          "type": "uint256"
        }
      ],
      "name": "InsufficientBalance",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "sender",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "marketplace",
          "type": "address"
        }
      ],
      "name": "MarketplaceOnly",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "NoDepositAllowed",
      "type": "error"
    },
    {
      "inputs": [
        {
          "internalType": "uint256",
          "name": "provided",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "max",
          "type": "uint256"
        }
      ],
      "name": "Overflow",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ReentrancyGuard",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroAddress",
      "type": "error"
    },
    {
      "inputs": [],
      "name": "ZeroValue",
      "type": "error"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "account",
          "type": "address"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "amount",
          "type": "uint256"
        }
      ],
      "name": "CreditsAccounted",
      "type": "event"
    },
    {
      "anonymous": false,
      "inputs": [
        {
          "indexed": true,
          "internalType": "address",
          "name": "mech",
          "type": "address"
        },
        {
          "indexed": true,
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "deliveryRate",
          "type": "uint256"
        },
        {
          "indexed": false,
          "internalType": "uint256",
          "name": "rateDiff",
          "type": "uint256"
        }
      ],
      "name": "MechPaymentCalculated",
      "type": "event"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "requester",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "maxDeliveryRate",
          "type": "uint256"
        },
        {
          "internalType": "bytes",
          "name": "",
          "type": "bytes"
        }
      ],
      "name": "checkAndRecordDeliveryRate",
      "outputs": [],
      "stateMutability": "payable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "mech",
          "type": "address"
        },
        {
          "internalType": "address",
          "name": "requester",
          "type": "address"
        },
        {
          "internalType": "uint256",
          "name": "requestId",
          "type": "uint256"
        },
        {
          "internalType": "uint256",
          "name": "maxDeliveryRate",
          "type": "uint256"
        }
      ],
      "name": "finalizeDeliveryRate",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "mapMechBalances",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "name": "mapRequesterBalances",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "mechMarketplace",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [
        {
          "internalType": "address",
          "name": "requester",
          "type": "address"
        }
      ],
      "name": "processPayment",
      "outputs": [],
      "stateMutability": "nonpayable",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "subscriptionNFT",
      "outputs": [
        {
          "internalType": "address",
          "name": "",
          "type": "address"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    },
    {
      "inputs": [],
      "name": "subscriptionTokenId",
      "outputs": [
        {
          "internalType": "uint256",
          "name": "",
          "type": "uint256"
        }
      ],
      "stateMutability": "view",
      "type": "function"
    }
  ],
  "bytecode": "0x60e060405260015f55348015610013575f5ffd5b50604051610db1380380610db1833981016040819052610032916100af565b6001600160a01b0382166100595760405163d92e233d60e01b815260040160405180910390fd5b805f0361007957604051637c946ed760e01b815260040160405180910390fd5b6001600160a01b03928316608052911660a05260c0526100e8565b80516001600160a01b03811681146100aa575f5ffd5b919050565b5f5f5f606084860312156100c1575f5ffd5b6100ca84610094565b92506100d860208501610094565b9150604084015190509250925092565b60805160a05160c051610c5a6101575f395f818161012401528181610338015281816104e1015261061001525f818160cc0152818161036101528181610509015261063d01525f818161018b0152818161020f015281816102770152818161074701526107af0152610c5a5ff3fe608060405260043610610079575f3560e01c80638fe123d71161004c5780638fe123d71461015b5780639c5e95901461017a578063e6798035146101ad578063fe71c424146101d8575f5ffd5b80636aeeffa81461007d57806385cf7244146100bb578063878b1132146101135780638a7e698d14610146575b5f5ffd5b348015610088575f5ffd5b506100a8610097366004610a1f565b60016020525f908152604090205481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506100ee7f000000000000000000000000000000000000000000000000000000000000000081565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016100b2565b34801561011e575f5ffd5b506100a87f000000000000000000000000000000000000000000000000000000000000000081565b610159610154366004610a6c565b6101f7565b005b348015610166575f5ffd5b50610159610175366004610a1f565b61044b565b348015610185575f5ffd5b506100ee7f000000000000000000000000000000000000000000000000000000000000000081565b3480156101b8575f5ffd5b506100a86101c7366004610a1f565b60026020525f908152604090205481565b3480156101e3575f5ffd5b506101596101f2366004610b75565b6106ef565b3373ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016146102a9576040517fe56895c000000000000000000000000000000000000000000000000000000000815233600482015273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660248201526044015b60405180910390fd5b34156102e3576040517f0f0fe74c0000000000000000000000000000000000000000000000000000000081523460048201526024016102a0565b73ffffffffffffffffffffffffffffffffffffffff8381165f818152600160205260408082205490517efdd58e00000000000000000000000000000000000000000000000000000000815260048101939093527f000000000000000000000000000000000000000000000000000000000000000060248401529290917f00000000000000000000000000000000000000000000000000000000000000009091169062fdd58e90604401602060405180830381865afa1580156103a7573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103cb9190610bb4565b90506103d78483610bf8565b91508181101561041d576040517fcf47918100000000000000000000000000000000000000000000000000000000815260048101829052602481018390526044016102a0565b5073ffffffffffffffffffffffffffffffffffffffff9093165f908152600160205260409020929092555050565b60015f541115610487576040517f8beb9d1600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60025f90815573ffffffffffffffffffffffffffffffffffffffff828116808352600160205260408084205490517efdd58e00000000000000000000000000000000000000000000000000000000815260048101929092527f0000000000000000000000000000000000000000000000000000000000000000602483015292917f0000000000000000000000000000000000000000000000000000000000000000169062fdd58e90604401602060405180830381865afa15801561054d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105719190610bb4565b90508181101561057f578091505b815f036105b8576040517f7c946ed700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff8381165f8181526001602052604080822091909155517ff5298aca00000000000000000000000000000000000000000000000000000000815260048101919091527f00000000000000000000000000000000000000000000000000000000000000006024820152604481018490527f00000000000000000000000000000000000000000000000000000000000000009091169063f5298aca906064015f604051808303815f87803b158015610680575f5ffd5b505af1158015610692573d5f5f3e3d5ffd5b505050508273ffffffffffffffffffffffffffffffffffffffff167f859b5a64b36708ddabb31db2d2bb2ca7e1c7832d56af01a303b47a579ec1959b836040516106de91815260200190565b60405180910390a2505060015f5550565b60015f54111561072b576040517f8beb9d1600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60025f553373ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016146107dc576040517fe56895c000000000000000000000000000000000000000000000000000000000815233600482015273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660248201526044016102a0565b6040517f6d99a988000000000000000000000000000000000000000000000000000000008152600481018390525f9073ffffffffffffffffffffffffffffffffffffffff861690636d99a988906024016020604051808303815f875af1158015610848573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061086c9190610bb4565b9050805f036108a7576040517f7c946ed700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f8183111561095b576108ba8284610c11565b73ffffffffffffffffffffffffffffffffffffffff86165f9081526001602052604090205490915080821115610926576040517f7ae5968500000000000000000000000000000000000000000000000000000000815260048101839052602481018290526044016102a0565b6109308282610c11565b73ffffffffffffffffffffffffffffffffffffffff87165f908152600160205260409020555061095f565b8291505b73ffffffffffffffffffffffffffffffffffffffff86165f9081526002602052604081208054849290610993908490610bf8565b90915550506040805183815260208101839052859173ffffffffffffffffffffffffffffffffffffffff8916917f7b4da18496c57421bb616b0a649b583873b6a44693d24433507fee64844970da910160405180910390a3505060015f5550505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610a1a575f5ffd5b919050565b5f60208284031215610a2f575f5ffd5b610a38826109f7565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b5f5f5f60608486031215610a7e575f5ffd5b610a87846109f7565b925060208401359150604084013567ffffffffffffffff811115610aa9575f5ffd5b8401601f81018613610ab9575f5ffd5b803567ffffffffffffffff811115610ad357610ad3610a3f565b6040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0603f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8501160116810181811067ffffffffffffffff82111715610b3f57610b3f610a3f565b604052818152828201602001881015610b56575f5ffd5b816020840160208301375f602083830101528093505050509250925092565b5f5f5f5f60808587031215610b88575f5ffd5b610b91856109f7565b9350610b9f602086016109f7565b93969395505050506040820135916060013590565b5f60208284031215610bc4575f5ffd5b5051919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b80820180821115610c0b57610c0b610bcb565b92915050565b81810381811115610c0b57610c0b610bcb56fea26469706673582212203f2342a96e7a3b1046340d7eea5816429fac1976ba7391eaae816f797b69240664736f6c634300081c0033",
  "deployedBytecode": "0x608060405260043610610079575f3560e01c80638fe123d71161004c5780638fe123d71461015b5780639c5e95901461017a578063e6798035146101ad578063fe71c424146101d8575f5ffd5b80636aeeffa81461007d57806385cf7244146100bb578063878b1132146101135780638a7e698d14610146575b5f5ffd5b348015610088575f5ffd5b506100a8610097366004610a1f565b60016020525f908152604090205481565b6040519081526020015b60405180910390f35b3480156100c6575f5ffd5b506100ee7f000000000000000000000000000000000000000000000000000000000000000081565b60405173ffffffffffffffffffffffffffffffffffffffff90911681526020016100b2565b34801561011e575f5ffd5b506100a87f000000000000000000000000000000000000000000000000000000000000000081565b610159610154366004610a6c565b6101f7565b005b348015610166575f5ffd5b50610159610175366004610a1f565b61044b565b348015610185575f5ffd5b506100ee7f000000000000000000000000000000000000000000000000000000000000000081565b3480156101b8575f5ffd5b506100a86101c7366004610a1f565b60026020525f908152604090205481565b3480156101e3575f5ffd5b506101596101f2366004610b75565b6106ef565b3373ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016146102a9576040517fe56895c000000000000000000000000000000000000000000000000000000000815233600482015273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660248201526044015b60405180910390fd5b34156102e3576040517f0f0fe74c0000000000000000000000000000000000000000000000000000000081523460048201526024016102a0565b73ffffffffffffffffffffffffffffffffffffffff8381165f818152600160205260408082205490517efdd58e00000000000000000000000000000000000000000000000000000000815260048101939093527f000000000000000000000000000000000000000000000000000000000000000060248401529290917f00000000000000000000000000000000000000000000000000000000000000009091169062fdd58e90604401602060405180830381865afa1580156103a7573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906103cb9190610bb4565b90506103d78483610bf8565b91508181101561041d576040517fcf47918100000000000000000000000000000000000000000000000000000000815260048101829052602481018390526044016102a0565b5073ffffffffffffffffffffffffffffffffffffffff9093165f908152600160205260409020929092555050565b60015f541115610487576040517f8beb9d1600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60025f90815573ffffffffffffffffffffffffffffffffffffffff828116808352600160205260408084205490517efdd58e00000000000000000000000000000000000000000000000000000000815260048101929092527f0000000000000000000000000000000000000000000000000000000000000000602483015292917f0000000000000000000000000000000000000000000000000000000000000000169062fdd58e90604401602060405180830381865afa15801561054d573d5f5f3e3d5ffd5b505050506040513d601f19601f820116820180604052508101906105719190610bb4565b90508181101561057f578091505b815f036105b8576040517f7c946ed700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b73ffffffffffffffffffffffffffffffffffffffff8381165f8181526001602052604080822091909155517ff5298aca00000000000000000000000000000000000000000000000000000000815260048101919091527f00000000000000000000000000000000000000000000000000000000000000006024820152604481018490527f00000000000000000000000000000000000000000000000000000000000000009091169063f5298aca906064015f604051808303815f87803b158015610680575f5ffd5b505af1158015610692573d5f5f3e3d5ffd5b505050508273ffffffffffffffffffffffffffffffffffffffff167f859b5a64b36708ddabb31db2d2bb2ca7e1c7832d56af01a303b47a579ec1959b836040516106de91815260200190565b60405180910390a2505060015f5550565b60015f54111561072b576040517f8beb9d1600000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b60025f553373ffffffffffffffffffffffffffffffffffffffff7f000000000000000000000000000000000000000000000000000000000000000016146107dc576040517fe56895c000000000000000000000000000000000000000000000000000000000815233600482015273ffffffffffffffffffffffffffffffffffffffff7f00000000000000000000000000000000000000000000000000000000000000001660248201526044016102a0565b6040517f6d99a988000000000000000000000000000000000000000000000000000000008152600481018390525f9073ffffffffffffffffffffffffffffffffffffffff861690636d99a988906024016020604051808303815f875af1158015610848573d5f5f3e3d5ffd5b505050506040513d601f19601f8201168201806040525081019061086c9190610bb4565b9050805f036108a7576040517f7c946ed700000000000000000000000000000000000000000000000000000000815260040160405180910390fd5b5f8183111561095b576108ba8284610c11565b73ffffffffffffffffffffffffffffffffffffffff86165f9081526001602052604090205490915080821115610926576040517f7ae5968500000000000000000000000000000000000000000000000000000000815260048101839052602481018290526044016102a0565b6109308282610c11565b73ffffffffffffffffffffffffffffffffffffffff87165f908152600160205260409020555061095f565b8291505b73ffffffffffffffffffffffffffffffffffffffff86165f9081526002602052604081208054849290610993908490610bf8565b90915550506040805183815260208101839052859173ffffffffffffffffffffffffffffffffffffffff8916917f7b4da18496c57421bb616b0a649b583873b6a44693d24433507fee64844970da910160405180910390a3505060015f5550505050565b803573ffffffffffffffffffffffffffffffffffffffff81168114610a1a575f5ffd5b919050565b5f60208284031215610a2f575f5ffd5b610a38826109f7565b9392505050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52604160045260245ffd5b5f5f5f60608486031215610a7e575f5ffd5b610a87846109f7565b925060208401359150604084013567ffffffffffffffff811115610aa9575f5ffd5b8401601f81018613610ab9575f5ffd5b803567ffffffffffffffff811115610ad357610ad3610a3f565b6040517fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0603f7fffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffe0601f8501160116810181811067ffffffffffffffff82111715610b3f57610b3f610a3f565b604052818152828201602001881015610b56575f5ffd5b816020840160208301375f602083830101528093505050509250925092565b5f5f5f5f60808587031215610b88575f5ffd5b610b91856109f7565b9350610b9f602086016109f7565b93969395505050506040820135916060013590565b5f60208284031215610bc4575f5ffd5b5051919050565b7f4e487b71000000000000000000000000000000000000000000000000000000005f52601160045260245ffd5b80820180821115610c0b57610c0b610bcb565b92915050565b81810381811115610c0b57610c0b610bcb56fea26469706673582212203f2342a96e7a3b1046340d7eea5816429fac1976ba7391eaae816f797b69240664736f6c634300081c0033",
  "linkReferences": {},
  "deployedLinkReferences": {}
}
